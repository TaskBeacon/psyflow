<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.08.06 -->
        <title>psyflow package - psyflow 0.1.2</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/logo_settings.css?v=510bd44c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">psyflow 0.1.2</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/logo_white-removebg.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/logo_black-removebg.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">psyflow 0.1.2</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-cta entries-box">
  <ul style="list-style: none; padding-left: 0;">
    <li><a href="https://taskbeacon.github.io/">Taskbeacon Home</a></li>
  </ul>
</div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/getting_started.html">Getting Started with PsyFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/get_subinfo.html">SubInfo: Collecting Participant Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/task_settings.html">TaskSettings: Configuring Your Experiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/build_blocks.html">BlockUnit: Managing Trials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/build_stimulus.html">StimBank: Flexible Stimulus Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/build_stimunit.html">StimUnit: Modular Stimulus &amp; Response Handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/send_trigger.html">TriggerSender: Sending Hardware Triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/cli_usage.html">psyflow-init: Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/utilities.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/llm_client.html">LLMClient: Using Large Language Models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">中文教程(Chinese Tutorials)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/getting_started_cn.html">PsyFlow 入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/get_subinfo_cn.html">SubInfo: 收集被试信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/task_settings_cn.html">TaskSettings: 配置您的实验</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/build_blocks_cn.html">BlockUnit: 管理试验</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/build_stimulus_cn.html">StimBank: 灵活的刺激管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/build_stimunit_cn.html">StimUnit：模块化的刺激呈现与反应处理单元</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/send_trigger_cn.html">TriggerSender: 发送硬件触发器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/cli_usage_cn.html">psyflow-init: 命令行界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/llm_client_cn.html">LLMClient: 使用大型语言模型</a></li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/TaskBeacon/psyflow/blob/main/source/api/psyflow.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/TaskBeacon/psyflow/edit/main/source/api/psyflow.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="psyflow-package">
<h1>psyflow package<a class="headerlink" href="#psyflow-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-psyflow.BlockUnit">
<span id="psyflow-blockunit-module"></span><h2>psyflow.BlockUnit module<a class="headerlink" href="#module-psyflow.BlockUnit" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">psyflow.BlockUnit.</span></span><span class="sig-name descname"><span class="pre">BlockUnit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyboard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_trials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Block-level controller for trials.</p>
<p>This object generates trial conditions, executes each trial, and stores
metadata. It exposes hooks for custom start/end logic and summary methods.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.block_id">
<span class="sig-name descname"><span class="pre">block_id</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.block_id" title="Link to this definition">¶</a></dt>
<dd><p>Identifier for the block.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.block_idx">
<span class="sig-name descname"><span class="pre">block_idx</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.block_idx" title="Link to this definition">¶</a></dt>
<dd><p>Index of this block in the experiment.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.n_trials">
<span class="sig-name descname"><span class="pre">n_trials</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.n_trials" title="Link to this definition">¶</a></dt>
<dd><p>Number of trials to execute.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.settings">
<span class="sig-name descname"><span class="pre">settings</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.settings" title="Link to this definition">¶</a></dt>
<dd><p>Experiment settings container.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.win">
<span class="sig-name descname"><span class="pre">win</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.win" title="Link to this definition">¶</a></dt>
<dd><p>PsychoPy window used for drawing.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.kb">
<span class="sig-name descname"><span class="pre">kb</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.kb" title="Link to this definition">¶</a></dt>
<dd><p>PsychoPy keyboard used for responses.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.seed">
<span class="sig-name descname"><span class="pre">seed</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.seed" title="Link to this definition">¶</a></dt>
<dd><p>Seed used for randomisation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.conditions">
<span class="sig-name descname"><span class="pre">conditions</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.conditions" title="Link to this definition">¶</a></dt>
<dd><p>Ordered list of condition labels for each trial.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of Any or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.results">
<span class="sig-name descname"><span class="pre">results</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.results" title="Link to this definition">¶</a></dt>
<dd><p>Accumulated trial results after <a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.run_trial" title="psyflow.BlockUnit.BlockUnit.run_trial"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_trial()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.meta">
<span class="sig-name descname"><span class="pre">meta</span></span><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.meta" title="Link to this definition">¶</a></dt>
<dd><p>Additional block metadata such as start time and duration.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.add_condition">
<span class="sig-name descname"><span class="pre">add_condition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.add_condition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.add_condition" title="Link to this definition">¶</a></dt>
<dd><p>Manually set the condition list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>condition_list</strong> (<em>list</em>) – A list of trial condition labels.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The same instance for method chaining.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit" title="psyflow.BlockUnit.BlockUnit">BlockUnit</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.generate_conditions">
<span class="sig-name descname"><span class="pre">generate_conditions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_trials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">condition_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'random'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.generate_conditions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.generate_conditions" title="Link to this definition">¶</a></dt>
<dd><p>Generate trial conditions for this block.</p>
<p>If <cite>func</cite> is provided, delegate generation to it. Otherwise, use the built-in
weighted, balanced generator with optional sequential vs. random ordering.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em><em>, </em><em>optional</em>) – User-supplied generator with signature
<cite>(n_trials, condition_labels, seed=…, **kwargs) -&gt; array-like</cite>.</p></li>
<li><p><strong>n_trials</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of trials in this block. Defaults to <cite>self.n_trials</cite>.</p></li>
<li><p><strong>condition_labels</strong> (<em>list</em><em> of </em><em>Any</em><em>, </em><em>optional</em>) – Labels for each condition. Defaults to <cite>self.settings.conditions</cite>.</p></li>
<li><p><strong>weights</strong> (<em>list</em><em> of </em><em>float</em><em>, </em><em>optional</em>) – Relative weight for each label; defaults to equal weights.</p></li>
<li><p><strong>order</strong> (<em>{'random'</em><em>,</em><em>'sequential'}</em>) – If ‘sequential’, interleave labels in the order given; if ‘random’,
build the list then shuffle.</p></li>
<li><p><strong>seed</strong> (<em>int</em><em>, </em><em>optional</em>) – Overrides <cite>self.seed</cite> for this generation call, without mutating
the block’s stored seed.</p></li>
<li><p><strong>**kwargs</strong> (<em>dict</em>) – Extra keyword arguments passed to <cite>func</cite> when used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns self for chaining.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit" title="psyflow.BlockUnit.BlockUnit">BlockUnit</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.get_all_data">
<span class="sig-name descname"><span class="pre">get_all_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.get_all_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.get_all_data" title="Link to this definition">¶</a></dt>
<dd><p>Return trial results without modifying anything.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Trial result dictionaries.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.get_trial_data">
<span class="sig-name descname"><span class="pre">get_trial_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'exact'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.get_trial_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.get_trial_data" title="Link to this definition">¶</a></dt>
<dd><p>Filter trial data based on value of a key using matching rules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The key in each trial dict to match against.</p></li>
<li><p><strong>pattern</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em>) – One or more patterns to match.</p></li>
<li><p><strong>match_type</strong> (<em>{'exact'</em><em>, </em><em>'startswith'</em><em>, </em><em>'endswith'</em><em>, </em><em>'regex'}</em>) – Type of string matching to use.</p></li>
<li><p><strong>negate</strong> (<em>bool</em>) – If True, return trials that do NOT match the pattern(s).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Filtered list of trial dicts.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.logging_block_info">
<span class="sig-name descname"><span class="pre">logging_block_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.logging_block_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.logging_block_info" title="Link to this definition">¶</a></dt>
<dd><p>Log block metadata including ID, index, seed, trial count, and condition distribution.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.on_end">
<span class="sig-name descname"><span class="pre">on_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.on_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.on_end" title="Link to this definition">¶</a></dt>
<dd><p>Register a function to run at the end of the block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em><em>, </em><em>optional</em>) – A function that takes the BlockUnit as input.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.on_start">
<span class="sig-name descname"><span class="pre">on_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.on_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.on_start" title="Link to this definition">¶</a></dt>
<dd><p>Register a function to run at the start of the block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em><em>, </em><em>optional</em>) – A function that takes the BlockUnit as input.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.run_trial">
<span class="sig-name descname"><span class="pre">run_trial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.run_trial"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.run_trial" title="Link to this definition">¶</a></dt>
<dd><p>Run all trials using a specified trial function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em>) – Function to run each trial. Must accept <code class="docutils literal notranslate"><span class="pre">(win,</span> <span class="pre">kb,</span> <span class="pre">settings,</span> <span class="pre">condition,</span> <span class="pre">**kwargs)</span></code>.</p></li>
<li><p><strong>**kwargs</strong> (<em>dict</em>) – Additional keyword arguments forwarded to <code class="docutils literal notranslate"><span class="pre">func</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.summarize">
<span class="sig-name descname"><span class="pre">summarize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">summary_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.summarize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.summarize" title="Link to this definition">¶</a></dt>
<dd><p>Summarize trial results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>summary_func</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Custom summary function. If None, hit rate and RT by condition are computed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Summary results.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.BlockUnit.BlockUnit.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/BlockUnit.html#BlockUnit.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.BlockUnit.BlockUnit.to_dict" title="Link to this definition">¶</a></dt>
<dd><p>Append trial results to a target list, or return self for chaining.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>target</strong> (<em>list</em><em> of </em><em>dict</em><em>, </em><em>optional</em>) – A list to append trial results to.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The BlockUnit itself for chaining.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit" title="psyflow.BlockUnit.BlockUnit">BlockUnit</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-psyflow.StimBank">
<span id="psyflow-stimbank-module"></span><h2>psyflow.StimBank module<a class="headerlink" href="#module-psyflow.StimBank" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">psyflow.StimBank.</span></span><span class="sig-name descname"><span class="pre">StimBank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">win</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A hybrid stimulus management system for PsychoPy experiments.</p>
<p><cite>StimBank</cite> supports:
- Manual registration of stimuli via decorators (&#64;registry.define(“name”))
- Loading stimuli from YAML or Python dictionaries
- Centralized retrieval, lazy instantiation, and batch preview</p>
<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.add_from_dict">
<span class="sig-name descname"><span class="pre">add_from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">named_specs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.add_from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.add_from_dict" title="Link to this definition">¶</a></dt>
<dd><p>Add stimuli from a dictionary or keyword-based specifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>named_specs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dictionary where keys are stimulus names and values are stimulus specs.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – Additional stimuli as keyword-based name=spec entries.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.add_voice">
<span class="sig-name descname"><span class="pre">add_voice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stim_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'zh-CN-XiaoxiaoNeural'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.add_voice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.add_voice" title="Link to this definition">¶</a></dt>
<dd><p>Convert arbitrary text to speech (MP3) and register it as a new Sound stimulus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stim_label</strong> (<em>str</em>) – The name under which to register the new voice stimulus,
and the base filename for the MP3 (e.g. ‘welcome_voice’ → ‘assets/welcome_voice.mp3’).</p></li>
<li><p><strong>text</strong> (<em>str</em>) – The text to synthesize.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – If True, overwrite an existing MP3 file. Default is False.</p></li>
<li><p><strong>voice</strong> (<em>str</em>) – The TTS voice to use (default “zh-CN-XiaoxiaoNeural”).
edge-tts –list-voices</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.convert_to_voice">
<span class="sig-name descname"><span class="pre">convert_to_voice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'zh-CN-YunyangNeural'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.convert_to_voice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.convert_to_voice" title="Link to this definition">¶</a></dt>
<dd><p>Convert specified TextStim/TextBox2 stimuli to speech (MP3) and register them
as new Sound stimuli in this StimBank.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of registered stimulus names to convert.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – If True, overwrite existing MP3 files (default False).</p></li>
<li><p><strong>voice</strong> (<em>str</em>) – Name of the TTS voice to use (default ‘zh-CN-YunyangNeural’).
edge-tts –list-voices</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.define">
<span class="sig-name descname"><span class="pre">define</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.define"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.define" title="Link to this definition">¶</a></dt>
<dd><p>Register a stimulus generator function using a decorator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Name to register the stimulus under.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A decorator to wrap the stimulus function.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.describe">
<span class="sig-name descname"><span class="pre">describe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.describe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.describe" title="Link to this definition">¶</a></dt>
<dd><p>Print accepted arguments for a registered stimulus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Name of the stimulus to describe.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.export_to_yaml">
<span class="sig-name descname"><span class="pre">export_to_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.export_to_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.export_to_yaml" title="Link to this definition">¶</a></dt>
<dd><p>Export YAML-defined stimuli (but not decorator-defined) to file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to save the YAML file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.get" title="Link to this definition">¶</a></dt>
<dd><p>Get a stimulus by name, instantiating it if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Registered stimulus name.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Instantiated PsychoPy stimulus object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>KeyError</strong> – If the stimulus is not registered.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.get_and_format">
<span class="sig-name descname"><span class="pre">get_and_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">format_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.get_and_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.get_and_format" title="Link to this definition">¶</a></dt>
<dd><p>Return a fresh TextStim or TextBox2 with formatted text, keeping other properties unchanged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the registered stimulus (TextStim or TextBox2).</p></li>
<li><p><strong>**format_kwargs</strong> – Formatting variables to apply to the <cite>text</cite> field.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>TextStim or TextBox2</dt><dd><p>A new formatted visual text stimulus.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>TypeError</strong> – If the stimulus is not a TextStim.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.get_group">
<span class="sig-name descname"><span class="pre">get_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.get_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.get_group" title="Link to this definition">¶</a></dt>
<dd><p>Retrieve a dictionary of stimuli whose names start with a given prefix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prefix</strong> (<em>str</em>) – Common prefix to match.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of {name: stimulus} pairs.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.get_selected">
<span class="sig-name descname"><span class="pre">get_selected</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.get_selected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.get_selected" title="Link to this definition">¶</a></dt>
<dd><p>Retrieve a subset of named stimuli.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>keys</strong> (<em>list</em><em> of </em><em>str</em>) – List of stimulus names to retrieve.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of {name: stimulus} pairs.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.has">
<span class="sig-name descname"><span class="pre">has</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.has"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.has" title="Link to this definition">¶</a></dt>
<dd><p>Check whether a stimulus is registered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.keys" title="Link to this definition">¶</a></dt>
<dd><p>List all registered stimulus names.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.make_factory">
<span class="sig-name descname"><span class="pre">make_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_kwargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.make_factory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.make_factory" title="Link to this definition">¶</a></dt>
<dd><p>Create a factory function for a given stimulus class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls</strong> (<em>type</em>) – PsychoPy stimulus class (e.g., TextStim).</p></li>
<li><p><strong>base_kwargs</strong> (<em>dict</em>) – Default keyword arguments.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Stimulus name (used for error messages).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A factory function that accepts (win, <a href="#id1"><span class="problematic" id="id2">**</span></a>overrides)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.preload_all">
<span class="sig-name descname"><span class="pre">preload_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.preload_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.preload_all" title="Link to this definition">¶</a></dt>
<dd><p>Instantiate all registered stimuli.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The object itself for method chaining.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#psyflow.StimBank.StimBank" title="psyflow.StimBank.StimBank">StimBank</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.preview_all">
<span class="sig-name descname"><span class="pre">preview_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wait_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.preview_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.preview_all" title="Link to this definition">¶</a></dt>
<dd><p>Preview all registered stimuli one by one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>wait_keys</strong> (<em>bool</em>) – Wait for key press after last stimulus.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.preview_group">
<span class="sig-name descname"><span class="pre">preview_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.preview_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.preview_group" title="Link to this definition">¶</a></dt>
<dd><p>Preview all stimuli that match a name prefix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix</strong> (<em>str</em>) – Prefix string to filter stimuli.</p></li>
<li><p><strong>wait_keys</strong> (<em>bool</em>) – Wait for key press after final stimulus.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.preview_selected">
<span class="sig-name descname"><span class="pre">preview_selected</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.preview_selected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.preview_selected" title="Link to this definition">¶</a></dt>
<dd><p>Preview selected stimuli by name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em> of </em><em>str</em>) – Stimulus names to preview.</p></li>
<li><p><strong>wait_keys</strong> (<em>bool</em>) – Wait for key press after final stimulus.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.rebuild">
<span class="sig-name descname"><span class="pre">rebuild</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">overrides</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.rebuild"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.rebuild" title="Link to this definition">¶</a></dt>
<dd><p>Rebuild a stimulus with optional updated parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Registered stimulus name.</p></li>
<li><p><strong>update_cache</strong> (<em>bool</em>) – Whether to overwrite the existing cached version.</p></li>
<li><p><strong>**overrides</strong> (<em>dict</em>) – New keyword arguments to override the original parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A fresh stimulus object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimBank.StimBank.validate_dict">
<span class="sig-name descname"><span class="pre">validate_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimBank.html#StimBank.validate_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimBank.StimBank.validate_dict" title="Link to this definition">¶</a></dt>
<dd><p>Validate a dictionary of stimulus definitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>dict</em>) – Dictionary of stimulus specs.</p></li>
<li><p><strong>strict</strong> (<em>bool</em>) – If True, raise errors; otherwise print warnings only.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-psyflow.SubInfo">
<span id="psyflow-subinfo-module"></span><h2>psyflow.SubInfo module<a class="headerlink" href="#module-psyflow.SubInfo" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="psyflow.SubInfo.SubInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">psyflow.SubInfo.</span></span><span class="sig-name descname"><span class="pre">SubInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/SubInfo.html#SubInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.SubInfo.SubInfo" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>GUI-based participant information collector using a YAML-style config.</p>
<p>This class generates an input dialog based on a configurable field structure
and provides basic localization and validation for different field types.</p>
<p>Supported field types:
- <cite>string</cite> : Free text input
- <cite>int</cite> : Integer input with optional constraints
- <cite>choice</cite> : Dropdown with options</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.SubInfo.SubInfo.subject_data">
<span class="sig-name descname"><span class="pre">subject_data</span></span><a class="headerlink" href="#psyflow.SubInfo.SubInfo.subject_data" title="Link to this definition">¶</a></dt>
<dd><p>The result of <cite>.collect()</cite>, formatted with English field keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.SubInfo.SubInfo.collect">
<span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exit_on_cancel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/SubInfo.html#SubInfo.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.SubInfo.SubInfo.collect" title="Link to this definition">¶</a></dt>
<dd><p>Show a dialog to collect participant input. Loops until valid or cancelled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>exit_on_cancel</strong> (<em>bool</em>) – If True, exit the program if the user cancels input.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Cleaned response dictionary with English field keys,
or None if cancelled and exit_on_cancel is False.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict or None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;subinfo_fields&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">}]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">info</span> <span class="o">=</span> <span class="n">SubInfo</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">info</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="n">exit_on_cancel</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.SubInfo.SubInfo.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">responses</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/SubInfo.html#SubInfo.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.SubInfo.SubInfo.validate" title="Link to this definition">¶</a></dt>
<dd><p>Validate responses based on type and constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>responses</strong> (<em>list</em>) – Raw responses from the dialog.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if all inputs are valid, False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-psyflow.TaskSettings">
<span id="psyflow-tasksettings-module"></span><h2>psyflow.TaskSettings module<a class="headerlink" href="#module-psyflow.TaskSettings" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">psyflow.TaskSettings.</span></span><span class="sig-name descname"><span class="pre">TaskSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units='deg'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_color='gray'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fullscreen=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_blocks=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_trials=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_list=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conditions=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_seed=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_mode='same_across_sub'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overall_seed=2025</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_file=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res_file=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_file=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path='./data'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_name=None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/TaskSettings.html#TaskSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Configuration container for PsychoPy-based tasks.</p>
<p>This dataclass holds core experimental parameters and provides utility
methods to set per-subject seeds, construct output paths, and dynamically
extend settings from external config dictionaries.</p>
<section id="features">
<h3>Features<a class="headerlink" href="#features" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Window display settings</p></li>
<li><p>Experimental structure (blocks, trials, conditions)</p></li>
<li><p>Response keys</p></li>
<li><p>Flexible seeding strategies</p></li>
<li><p>Auto-generated per-subject filenames</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.add_subinfo">
<span class="sig-name descname"><span class="pre">add_subinfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subinfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/TaskSettings.html#TaskSettings.add_subinfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.add_subinfo" title="Link to this definition">¶</a></dt>
<dd><p>Add subject-specific information and set seed/file names accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>subinfo</strong> (<em>dict</em>) – Dictionary that must contain at least ‘subject_id’. Also used to
construct per-subject output file names.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If ‘subject_id’ is missing from subinfo.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.bg_color">
<span class="sig-name descname"><span class="pre">bg_color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gray'</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.bg_color" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.block_seed">
<span class="sig-name descname"><span class="pre">block_seed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code><span class="pre">]]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.block_seed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.conditions">
<span class="sig-name descname"><span class="pre">conditions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.conditions" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/TaskSettings.html#TaskSettings.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.from_dict" title="Link to this definition">¶</a></dt>
<dd><p>Create a TaskSettings instance from a flat dictionary.</p>
<p>Known fields are applied normally; unknown keys are attached as attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<em>dict</em>) – Dictionary of configuration options.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An initialized instance with config applied.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings" title="psyflow.TaskSettings.TaskSettings">TaskSettings</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;total_blocks&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;total_trials&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TaskSettings</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.fullscreen">
<span class="sig-name descname"><span class="pre">fullscreen</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.fullscreen" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.json_file">
<span class="sig-name descname"><span class="pre">json_file</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.json_file" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.key_list">
<span class="sig-name descname"><span class="pre">key_list</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.key_list" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.log_file">
<span class="sig-name descname"><span class="pre">log_file</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.log_file" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.overall_seed">
<span class="sig-name descname"><span class="pre">overall_seed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2025</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.overall_seed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.res_file">
<span class="sig-name descname"><span class="pre">res_file</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.res_file" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.save_path">
<span class="sig-name descname"><span class="pre">save_path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'./data'</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.save_path" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.save_to_json">
<span class="sig-name descname"><span class="pre">save_to_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/TaskSettings.html#TaskSettings.save_to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.save_to_json" title="Link to this definition">¶</a></dt>
<dd><p>Save the current TaskSettings instance to a JSON file.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.screen">
<span class="sig-name descname"><span class="pre">screen</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.screen" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.seed_mode">
<span class="sig-name descname"><span class="pre">seed_mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'same_across_sub'</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.seed_mode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.set_block_seed">
<span class="sig-name descname"><span class="pre">set_block_seed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed_base</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/TaskSettings.html#TaskSettings.set_block_seed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.set_block_seed" title="Link to this definition">¶</a></dt>
<dd><p>Generate a list of per-block seeds from a base seed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seed_base</strong> (<em>int</em>) – Base seed used to generate a list of integers for each block.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.size">
<span class="sig-name descname"><span class="pre">size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code><span class="pre">]</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.size" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.task_name">
<span class="sig-name descname"><span class="pre">task_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.task_name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.total_blocks">
<span class="sig-name descname"><span class="pre">total_blocks</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.total_blocks" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.total_trials">
<span class="sig-name descname"><span class="pre">total_trials</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.total_trials" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.trials_per_block">
<span class="sig-name descname"><span class="pre">trials_per_block</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.trials_per_block" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.TaskSettings.TaskSettings.units">
<span class="sig-name descname"><span class="pre">units</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'deg'</span></em><a class="headerlink" href="#psyflow.TaskSettings.TaskSettings.units" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</dd></dl>

</section>
<section id="module-psyflow.StimUnit">
<span id="psyflow-stimunit-module"></span><h2>psyflow.StimUnit module<a class="headerlink" href="#module-psyflow.StimUnit" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">psyflow.StimUnit.</span></span><span class="sig-name descname"><span class="pre">StimUnit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">win</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triggersender</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A modular trial unit for PsychoPy-based experiments. Designed to encapsulate
stimulus presentation, response handling, event triggers, and lifecycle hooks
with flexible timing control.</p>
<section id="id3">
<h3>Features<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add multiple visual stimuli and manage them as a group.</p></li>
<li><p>Register event hooks for start, response, timeout, and end stages.</p></li>
<li><p>Supports both time-based and frame-based control modes.</p></li>
<li><p>Triggers aligned to visual flips (e.g., for EEG/fMRI).</p></li>
<li><p>Logs detailed trial state to PsychoPy’s logging system.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">type win<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Window</span></code></span></p>
</dd>
<dt class="field-even">param win<span class="colon">:</span></dt>
<dd class="field-even"><p>PsychoPy window where stimuli will be drawn.</p>
</dd>
<dt class="field-odd">type win<span class="colon">:</span></dt>
<dd class="field-odd"><p>visual.Window</p>
</dd>
<dt class="field-even">type unit_label<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
<dt class="field-odd">param unit_label<span class="colon">:</span></dt>
<dd class="field-odd"><p>Identifier for the trial (used for logging/debugging).</p>
</dd>
<dt class="field-even">type unit_label<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">param trigger<span class="colon">:</span></dt>
<dd class="field-odd"><p>External trigger handler (default: a dummy TriggerSender instance).</p>
</dd>
<dt class="field-even">type trigger<span class="colon">:</span></dt>
<dd class="field-even"><p>Trigger, optional</p>
</dd>
<dt class="field-odd">param frame_time<span class="colon">:</span></dt>
<dd class="field-odd"><p>Duration of a single frame in seconds (default: 1/60 for 60Hz).</p>
</dd>
<dt class="field-even">type frame_time<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.add_stim">
<span class="sig-name descname"><span class="pre">add_stim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">stims</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.add_stim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.add_stim" title="Link to this definition">¶</a></dt>
<dd><p>Add one or more visual or sound stimuli to the trial.</p>
<p>Supports calling patterns:
.add_stim(stimA)
.add_stim(stimA, stimB, stimC)
.add_stim([stimA, stimB, stimC])</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*stims</strong> (<em>visual.BaseVisualStim</em><em> or </em><em>sound.Sound</em><em> or </em><em>list</em><em> of </em><em>such</em>) – One or more PsychoPy stimuli (visual or audio).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns self for chaining.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#psyflow.StimUnit.StimUnit" title="psyflow.StimUnit.StimUnit">StimUnit</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.capture_response">
<span class="sig-name descname"><span class="pre">capture_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onset_trigger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_trigger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_trigger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminate_on_response</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correct_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight_stim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynamic_highlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.capture_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.capture_response" title="Link to this definition">¶</a></dt>
<dd><p>Wait for a keypress or timeout. Supports both time-based and frame-based duration.
Triggers and onset time synced to visual flip.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – Keys to listen for.</p></li>
<li><p><strong>duration</strong> (<em>float</em>) – Response window duration in seconds.</p></li>
<li><p><strong>onset_trigger</strong> (<em>int</em>) – Trigger code sent at stimulus onset.</p></li>
<li><p><strong>response_trigger</strong> (<em>int</em><em> | </em><em>dict</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em>) – Trigger code for response, can be per-key.</p></li>
<li><p><strong>timeout_trigger</strong> (<em>int</em>) – Trigger code for timeout.</p></li>
<li><p><strong>correct_keys</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – If provided, only keys in this list count as hits.</p></li>
<li><p><strong>highlight_stim</strong> (<em>VisualStim</em><em> or </em><em>dict</em>) – If a single stim: draw it around whatever is chosen.
If a dict: maps key names -&gt; highlight stimuli.</p></li>
<li><p><strong>dynamic_highlight</strong> (<em>bool</em>) – If True, allow multiple key presses and update the highlight each time.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#psyflow.StimUnit.StimUnit" title="psyflow.StimUnit.StimUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">StimUnit</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.clear_stimuli">
<span class="sig-name descname"><span class="pre">clear_stimuli</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.clear_stimuli"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.clear_stimuli" title="Link to this definition">¶</a></dt>
<dd><p>Clear all previously added stimuli from the trial.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#psyflow.StimUnit.StimUnit" title="psyflow.StimUnit.StimUnit">StimUnit</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.get_state">
<span class="sig-name descname"><span class="pre">get_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.get_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.get_state" title="Link to this definition">¶</a></dt>
<dd><p>Retrieve a value from internal state.</p>
<p>Lookup order:
1. Try exact key.
2. If not found, try prefixed key using:
- provided prefix (if given)
- otherwise self.label</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – State variable name.</p></li>
<li><p><strong>default</strong> (<em>Any</em>) – Value to return if key is not found.</p></li>
<li><p><strong>prefix</strong> (<em>str</em><em>, </em><em>optional</em>) – Optional manual prefix to use (overrides self.label).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Stored value, or default if not found.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.log_unit">
<span class="sig-name descname"><span class="pre">log_unit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.log_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.log_unit" title="Link to this definition">¶</a></dt>
<dd><p>Write the current trial state to PsychoPy logs.</p>
<p>All key-value pairs stored in <code class="xref py py-attr docutils literal notranslate"><span class="pre">state</span></code> are emitted using
<code class="docutils literal notranslate"><span class="pre">logging.data</span></code> which allows post‑hoc reconstruction of each trial.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unit</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="s2">&quot;space&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unit</span><span class="o">.</span><span class="n">log_unit</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.on_end">
<span class="sig-name descname"><span class="pre">on_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.on_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.on_end" title="Link to this definition">¶</a></dt>
<dd><p>Register or decorate a function to call at the end of the trial.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.on_response">
<span class="sig-name descname"><span class="pre">on_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.on_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.on_response" title="Link to this definition">¶</a></dt>
<dd><p>Register or decorate a function to call when a valid response key is pressed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – Keys that trigger the callback.</p></li>
<li><p><strong>func</strong> (<em>Callable</em><em> or </em><em>None</em>) – A function accepting (StimUnit, key, rt) or None to use as decorator.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.on_start">
<span class="sig-name descname"><span class="pre">on_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.on_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.on_start" title="Link to this definition">¶</a></dt>
<dd><p>Register or decorate a function to call at trial start.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.on_timeout">
<span class="sig-name descname"><span class="pre">on_timeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.on_timeout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.on_timeout" title="Link to this definition">¶</a></dt>
<dd><p>Register or decorate a function to call on timeout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> (<em>float</em>) – Time in seconds after which timeout is triggered.</p></li>
<li><p><strong>func</strong> (<em>Callable</em><em> or </em><em>None</em>) – A function accepting (StimUnit) or None to use as decorator.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">terminate_on_response</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.run" title="Link to this definition">¶</a></dt>
<dd><p>Execute the full trial lifecycle.</p>
<p>This method draws all registered stimuli, handles response and timeout
events, executes registered hooks and logs the final state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>terminate_on_response</strong> (<em>bool</em><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the trial ends immediately once a response is
registered. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The instance itself for chaining.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#psyflow.StimUnit.StimUnit" title="psyflow.StimUnit.StimUnit">StimUnit</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">StimUnit</span><span class="p">(</span><span class="s2">&quot;trial1&quot;</span><span class="p">,</span> <span class="n">win</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.send_trigger">
<span class="sig-name descname"><span class="pre">send_trigger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trigger_code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.send_trigger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.send_trigger" title="Link to this definition">¶</a></dt>
<dd><p>Send a trigger value via the connected trigger object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trigger_code</strong> (<em>int</em>) – The value to send.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#psyflow.StimUnit.StimUnit" title="psyflow.StimUnit.StimUnit">StimUnit</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.set_state">
<span class="sig-name descname"><span class="pre">set_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.set_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.set_state" title="Link to this definition">¶</a></dt>
<dd><p>Update internal state with optional key prefixing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix</strong> (<em>str</em><em>, </em><em>optional</em>) – If None, use self.label. If “”, store keys as-is. Else use prefix + ‘_’.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – State variables to store.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#psyflow.StimUnit.StimUnit" title="psyflow.StimUnit.StimUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">StimUnit</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.show">
<span class="sig-name descname"><span class="pre">show</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onset_trigger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset_trigger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.show"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.show" title="Link to this definition">¶</a></dt>
<dd><p>Display the stimulus for a specified duration, using frame-based timing
(recommended for EEG/fMRI). Audio playback is automatically started on stimulus onset.</p>
<p>If duration is None, the longest duration of any sound stimulus will be used.
If duration is set explicitly, it will be respected even if shorter than any sound duration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>duration</strong> (<em>float</em><em> | </em><em>list</em><em> | </em><em>tuple</em><em> | </em><em>None</em>) – Duration of stimulus presentation (in seconds). Can be:
- A fixed number
- A (min, max) range to sample from
- None → automatically use max sound duration (if any)</p></li>
<li><p><strong>onset_trigger</strong> (<em>int</em>) – Trigger code to send at stimulus onset.</p></li>
<li><p><strong>offset_trigger</strong> (<em>int</em>) – Trigger code to send at stimulus offset.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#psyflow.StimUnit.StimUnit" title="psyflow.StimUnit.StimUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">StimUnit</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>StimUnit</em></p></li>
<li><p><em>Behavior Table</em></p></li>
<li><p><em>————–</em></p></li>
<li><p><em>| Condition                                | Behavior                                             |</em></p></li>
<li><p><em>|——————————————|——————————————————|</em></p></li>
<li><p><em>| duration=None                            | Uses longest sound (or 0.0 if no sound)             |</em></p></li>
<li><p><em>| duration=(1, 2)                          | Samples uniformly in [1, 2], regardless of sound    |</em></p></li>
<li><p><em>| duration=1.0 + sound is 2.5 seconds      | Screen ends at 1.0s, sound may be cut off early     |</em></p></li>
<li><p><em>| duration=None + sound is 2.5 seconds     | Screen and sound will both last full 2.5s           |</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.to_dict" title="Link to this definition">¶</a></dt>
<dd><p>Return the StimUnit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>target</strong> (<em>dict</em><em>, </em><em>optional</em>) – If provided, updates this dict in-place and returns it.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>StimUnit for chaining.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#psyflow.StimUnit.StimUnit" title="psyflow.StimUnit.StimUnit">StimUnit</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.StimUnit.StimUnit.wait_and_continue">
<span class="sig-name descname"><span class="pre">wait_and_continue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['space']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/StimUnit.html#StimUnit.wait_and_continue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.StimUnit.StimUnit.wait_and_continue" title="Link to this definition">¶</a></dt>
<dd><p>Display the current stimuli (visual and sound) and wait for a key press to continue or quit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – Keys that allow the trial to proceed (default: [“space”]).</p></li>
<li><p><strong>min_wait</strong> (<em>float</em><em> or </em><em>None</em>) – Minimum time to wait before accepting key press. If None, and any sound
stimuli are present, it is automatically set to the longest sound duration.</p></li>
<li><p><strong>log_message</strong> (<em>str</em><em>, </em><em>optional</em>) – Optional log message (default: auto-generated).</p></li>
<li><p><strong>terminate</strong> (<em>bool</em>) – If True, the experiment will quit after key press.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#psyflow.StimUnit.StimUnit" title="psyflow.StimUnit.StimUnit">StimUnit</a></p>
</dd>
</dl>
</dd></dl>

</section>
</dd></dl>

</section>
<section id="module-psyflow.TriggerSender">
<span id="psyflow-triggersender-module"></span><h2>psyflow.TriggerSender module<a class="headerlink" href="#module-psyflow.TriggerSender" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="psyflow.TriggerSender.TriggerSender">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">psyflow.TriggerSender.</span></span><span class="sig-name descname"><span class="pre">TriggerSender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trigger_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_trigger_start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_trigger_end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/TriggerSender.html#TriggerSender"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.TriggerSender.TriggerSender" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A wrapper for sending EEG/MEG trigger codes with optional hooks and delays.</p>
<p>Can be initialized with a real sending function or used in mock mode
for development/testing without hardware.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sender</span> <span class="o">=</span> <span class="n">TriggerSender</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">port</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytes</span><span class="p">([</span><span class="n">c</span><span class="p">])))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sender</span> <span class="o">=</span> <span class="n">TriggerSender</span><span class="p">(</span><span class="n">mock</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="psyflow.TriggerSender.TriggerSender.send">
<span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/TriggerSender.html#TriggerSender.send"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.TriggerSender.TriggerSender.send" title="Link to this definition">¶</a></dt>
<dd><p>Send a trigger code using the configured function and callbacks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>code</strong> (<em>int</em><em> or </em><em>None</em>) – The code to send. If <code class="docutils literal notranslate"><span class="pre">None</span></code> the method does nothing and logs a
warning.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="module-psyflow.LLM">
<span id="psyflow-llm-module"></span><h2>psyflow.LLM module<a class="headerlink" href="#module-psyflow.LLM" title="Link to this heading">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="psyflow.LLM.LLMAPIError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">psyflow.LLM.</span></span><span class="sig-name descname"><span class="pre">LLMAPIError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_response</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMAPIError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMAPIError" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Exception raised for errors returned by LLM providers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Human-readable description of the error.</p></li>
<li><p><strong>status_code</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</span>) – HTTP status code if applicable.</p></li>
<li><p><strong>api_response</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]</span>) – Raw response from the provider or SDK error details.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">psyflow.LLM.</span></span><span class="sig-name descname"><span class="pre">LLMClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Unified client for multiple LLM backends, plus utilities for task-document conversion and translation.</p>
<dl class="simple">
<dt>Supported providers:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gemini</span></code>  : Google GenAI SDK</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">openai</span></code>  : Official OpenAI SDK</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deepseek</span></code>: OpenAI SDK with custom base_url</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">moonshot</span></code> : OpenAI SDK with custom base_url</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.provider">
<span class="sig-name descname"><span class="pre">provider</span></span><a class="headerlink" href="#psyflow.LLM.LLMClient.provider" title="Link to this definition">¶</a></dt>
<dd><p>Lowercase provider name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.api_key">
<span class="sig-name descname"><span class="pre">api_key</span></span><a class="headerlink" href="#psyflow.LLM.LLMClient.api_key" title="Link to this definition">¶</a></dt>
<dd><p>API key for authentication.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.model">
<span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#psyflow.LLM.LLMClient.model" title="Link to this definition">¶</a></dt>
<dd><p>Model identifier to use.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient._sdk_client">
<span class="sig-name descname"><span class="pre">_sdk_client</span></span><a class="headerlink" href="#psyflow.LLM.LLMClient._sdk_client" title="Link to this definition">¶</a></dt>
<dd><p>Underlying SDK client instance.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.knowledge_base">
<span class="sig-name descname"><span class="pre">knowledge_base</span></span><a class="headerlink" href="#psyflow.LLM.LLMClient.knowledge_base" title="Link to this definition">¶</a></dt>
<dd><p>Few-shot examples for generation context.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.add_knowledge">
<span class="sig-name descname"><span class="pre">add_knowledge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.add_knowledge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.add_knowledge" title="Link to this definition">¶</a></dt>
<dd><p>Bulk-load few-shot examples into memory from either:</p>
<ol class="arabic simple">
<li><p>A JSON file path containing a list of example-dicts, or</p></li>
<li><p>A list of example-dicts directly.</p></li>
</ol>
<dl class="simple">
<dt>Each example-dict maps keys to either:</dt><dd><ul class="simple">
<li><p>List[str] of file paths or URLs → will be parsed via <cite>_parse_entry()</cite></p></li>
<li><p>Raw text (str)                 → will be stripped and stored as-is</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]]]</span>) – <ul class="simple">
<li><p>If <cite>str</cite>, treated as path to a JSON file containing List[Dict[…]].</p></li>
<li><p>If <cite>list</cite>, treated as in-memory list of example dicts.</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – on invalid JSON structure or unsupported source type.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.doc2task">
<span class="sig-name descname"><span class="pre">doc2task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc_text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taps_root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deterministic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.doc2task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.doc2task" title="Link to this definition">¶</a></dt>
<dd><p>Reconstruct multiple interdependent source files from a task description,
with utils.py treated as optional.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>doc_text</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Directory, README path, or raw description string.</p></li>
<li><p><strong>taps_root</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Root folder to write outputs under <cite>&lt;task_name&gt;/</cite>.</p></li>
<li><p><strong>prompt</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span>) – Custom instruction prompt (defaults shown below).</p></li>
<li><p><strong>deterministic</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – Force deterministic sampling.</p></li>
<li><p><strong>temperature</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>) – Sampling temperature.</p></li>
<li><p><strong>max_tokens</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span>) – Max tokens to generate.</p></li>
<li><p><strong>file_names</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]</span>) – List of filenames to request. Defaults to
[“run_trial.py”,”utils.py”,”main.py”,”config.yaml”].</p></li>
<li><p><strong>return_raw</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – If True, return raw LLM markdown; no files written.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
<ul class="simple">
<li><p>If return_raw: the raw markdown string from the LLM.</p></li>
<li><p>Otherwise: a dict mapping each filename → its saved path (excluding any empty utils.py).</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if any <strong>required</strong> section is missing (all except utils.py).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deterministic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.generate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.generate" title="Link to this definition">¶</a></dt>
<dd><p>Generate text completion from the configured model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Input prompt for the LLM.</p></li>
<li><p><strong>deterministic</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – If True, zero out sampling randomness.</p></li>
<li><p><strong>kwargs</strong> – Additional generation parameters (e.g., temperature, stop).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Generated text response.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#psyflow.LLM.LLMAPIError" title="psyflow.LLM.LLMAPIError"><strong>LLMAPIError</strong></a> – If the provider returns an error.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.list_models">
<span class="sig-name descname"><span class="pre">list_models</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.list_models"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.list_models" title="Link to this definition">¶</a></dt>
<dd><p>Retrieve a list of available model IDs for the current provider.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of model identifiers.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#psyflow.LLM.LLMAPIError" title="psyflow.LLM.LLMAPIError"><strong>LLMAPIError</strong></a> – If no models are returned or listing fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.register_provider">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register_provider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handler</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.register_provider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.register_provider" title="Link to this definition">¶</a></dt>
<dd><p>Register a custom provider handler.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Identifier for the custom provider.</p></li>
<li><p><strong>handler</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span>) – Callable that takes (prompt, kwargs) and returns response string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.save_knowledge">
<span class="sig-name descname"><span class="pre">save_knowledge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.save_knowledge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.save_knowledge" title="Link to this definition">¶</a></dt>
<dd><p>Write current knowledge_base (a list of dicts) to a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.save_readme">
<span class="sig-name descname"><span class="pre">save_readme</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.save_readme"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.save_readme" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
<dl class="simple">
<dt>Save a README to disk. Call as either:</dt><dd><p>save_readme(output_path)
save_readme(content, output_path)</p>
</dd>
</dl>
<p>If only output_path is provided, uses self.last_response.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.task2doc">
<span class="sig-name descname"><span class="pre">task2doc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logic_paths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_paths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deterministic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.task2doc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.task2doc" title="Link to this definition">¶</a></dt>
<dd><p>Summarize a task into README.md. If <cite>prompt</cite> is None, loads the
instruction template from <cite>psyflow/templates/task2doc_prompt.txt</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.test">
<span class="sig-name descname"><span class="pre">test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Hello'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.test" title="Link to this definition">¶</a></dt>
<dd><p>Smoke test connection and small completion.</p>
<ol class="arabic simple">
<li><p>Ensures the configured model exists.</p></li>
<li><p>Sends a small ping and returns its response.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ping</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Prompt to send for testing.</p></li>
<li><p><strong>max_tokens</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span>) – Maximum tokens to request.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Ping response string.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#psyflow.LLM.LLMAPIError" title="psyflow.LLM.LLMAPIError"><strong>LLMAPIError</strong></a> – On model not found or generation failure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.translate">
<span class="sig-name descname"><span class="pre">translate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_language</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deterministic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">800</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.translate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.translate" title="Link to this definition">¶</a></dt>
<dd><p>Translate arbitrary text into the target language, preserving formatting
and placeholders. Returns only the translated text—no explanations.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="psyflow.LLM.LLMClient.translate_config">
<span class="sig-name descname"><span class="pre">translate_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_language</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deterministic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/LLM.html#LLMClient.translate_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.LLM.LLMClient.translate_config" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]</span></p>
</dd>
</dl>
<dl class="simple">
<dt>Translate selected fields of a YAML config:</dt><dd><ul class="simple">
<li><p>subinfo_mapping values</p></li>
<li><p>any stimuli entries where type is ‘text’ or ‘textbox’</p></li>
</ul>
</dd>
<dt>If <cite>config</cite> is:</dt><dd><ul class="simple">
<li><p>a file path (str) → loaded via load_config()</p></li>
<li><p>a dict returned from load_config()</p></li>
<li><p>None → defaults to “./config/config.yaml”</p></li>
</ul>
</dd>
<dt>If <cite>output_dir</cite> is provided, writes out a translated YAML:</dt><dd><p>filename is <cite>output_name</cite> if given, else original basename + “.translated.yaml”.</p>
</dd>
</dl>
<p>Returns the updated raw YAML dict.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-psyflow.utils">
<span id="psyflow-utils-module"></span><h2>psyflow.utils module<a class="headerlink" href="#module-psyflow.utils" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="psyflow.utils.count_down">
<span class="sig-prename descclassname"><span class="pre">psyflow.utils.</span></span><span class="sig-name descname"><span class="pre">count_down</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">win</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stim_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/utils.html#count_down"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.utils.count_down" title="Link to this definition">¶</a></dt>
<dd><p>Display a frame-accurate countdown using TextStim.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>win</strong> (<em>psychopy.visual.Window</em>) – The PsychoPy window to display the countdown in.</p></li>
<li><p><strong>seconds</strong> (<em>int</em>) – How many seconds to count down from.</p></li>
<li><p><strong>**stim_kwargs</strong> (<em>dict</em>) – Additional keyword arguments for TextStim (e.g., font, height, color).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The countdown is shown on <code class="docutils literal notranslate"><span class="pre">win</span></code> for its side effect.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="psyflow.utils.initialize_exp">
<span class="sig-prename descclassname"><span class="pre">psyflow.utils.</span></span><span class="sig-name descname"><span class="pre">initialize_exp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/utils.html#initialize_exp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.utils.initialize_exp" title="Link to this definition">¶</a></dt>
<dd><p>Set up the PsychoPy window, keyboard and logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settings</strong> (<em>Any</em>) – Configuration object with attributes describing window and logging
settings.</p></li>
<li><p><strong>screen_id</strong> (<em>int</em><em>, </em><em>optional</em>) – Monitor index to open the window on. Defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The created PsychoPy <code class="docutils literal notranslate"><span class="pre">Window</span></code> and <code class="docutils literal notranslate"><span class="pre">Keyboard</span></code> objects.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple of (Window, Keyboard)</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">win</span><span class="p">,</span> <span class="n">kb</span> <span class="o">=</span> <span class="n">initialize_exp</span><span class="p">(</span><span class="n">my_settings</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="psyflow.utils.list_serial_ports">
<span class="sig-prename descclassname"><span class="pre">psyflow.utils.</span></span><span class="sig-name descname"><span class="pre">list_serial_ports</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/utils.html#list_serial_ports"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.utils.list_serial_ports" title="Link to this definition">¶</a></dt>
<dd><p>Alias for <a class="reference internal" href="#psyflow.utils.show_ports" title="psyflow.utils.show_ports"><code class="xref py py-func docutils literal notranslate"><span class="pre">show_ports()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>This function simply calls <a class="reference internal" href="#psyflow.utils.show_ports" title="psyflow.utils.show_ports"><code class="xref py py-func docutils literal notranslate"><span class="pre">show_ports()</span></code></a> and prints the ports.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="psyflow.utils.list_supported_voices">
<span class="sig-prename descclassname"><span class="pre">psyflow.utils.</span></span><span class="sig-name descname"><span class="pre">list_supported_voices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_lang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">human_readable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/utils.html#list_supported_voices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.utils.list_supported_voices" title="Link to this definition">¶</a></dt>
<dd><p>Query available edge-tts voices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter_lang</strong> (<em>str</em><em>, </em><em>optional</em>) – Return only voices whose locale starts with this prefix.</p></li>
<li><p><strong>human_readable</strong> (<em>bool</em><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> print a formatted table; otherwise return the raw list.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The raw voice dictionaries if <code class="docutils literal notranslate"><span class="pre">human_readable</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>,
otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of dict or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="psyflow.utils.load_config">
<span class="sig-prename descclassname"><span class="pre">psyflow.utils.</span></span><span class="sig-name descname"><span class="pre">load_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'config/config.yaml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/utils.html#load_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.utils.load_config" title="Link to this definition">¶</a></dt>
<dd><p>Load a config.yaml file and return a structured dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_file</strong> (<em>str</em>) – Path to YAML config file.</p></li>
<li><p><strong>extra_keys</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Additional top-level keys to extract as ‘xxx_config’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary with structured configs.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s1">&#39;config/config.yaml&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;task_config&#39;</span><span class="p">][</span><span class="s1">&#39;screen_width&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="psyflow.utils.show_ports">
<span class="sig-prename descclassname"><span class="pre">psyflow.utils.</span></span><span class="sig-name descname"><span class="pre">show_ports</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/utils.html#show_ports"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.utils.show_ports" title="Link to this definition">¶</a></dt>
<dd><p>List all available serial ports.</p>
<p>The function prints a numbered list of connected serial ports with a short
description. It is mainly intended for quick troubleshooting when choosing
a port for trigger boxes or external devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>This function is executed for its side effect of printing to <code class="docutils literal notranslate"><span class="pre">stdout</span></code>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="psyflow.utils.taps">
<span class="sig-prename descclassname"><span class="pre">psyflow.utils.</span></span><span class="sig-name descname"><span class="pre">taps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cookiecutter-psyflow'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/psyflow/utils.html#taps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#psyflow.utils.taps" title="Link to this definition">¶</a></dt>
<dd><p>Generate a task skeleton using the bundled template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_name</strong> (<em>str</em>) – Name of the new task directory to create.</p></li>
<li><p><strong>template</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the template folder inside the package. Defaults to
<code class="docutils literal notranslate"><span class="pre">&quot;cookiecutter-psyflow&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to the newly created project directory.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">taps</span><span class="p">(</span><span class="s2">&quot;mytask&quot;</span><span class="p">)</span>
<span class="go">&quot;mytask&quot;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-psyflow">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-psyflow" title="Link to this heading">¶</a></h2>
<p>psyflow: A utility package for modular PsychoPy experiment development.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Zhipeng Cao
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">psyflow package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-psyflow.BlockUnit">psyflow.BlockUnit module</a><ul>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit"><code class="docutils literal notranslate"><span class="pre">BlockUnit</span></code></a><ul>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.block_id"><code class="docutils literal notranslate"><span class="pre">BlockUnit.block_id</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.block_idx"><code class="docutils literal notranslate"><span class="pre">BlockUnit.block_idx</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.n_trials"><code class="docutils literal notranslate"><span class="pre">BlockUnit.n_trials</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.settings"><code class="docutils literal notranslate"><span class="pre">BlockUnit.settings</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.win"><code class="docutils literal notranslate"><span class="pre">BlockUnit.win</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.kb"><code class="docutils literal notranslate"><span class="pre">BlockUnit.kb</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.seed"><code class="docutils literal notranslate"><span class="pre">BlockUnit.seed</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.conditions"><code class="docutils literal notranslate"><span class="pre">BlockUnit.conditions</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.results"><code class="docutils literal notranslate"><span class="pre">BlockUnit.results</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.meta"><code class="docutils literal notranslate"><span class="pre">BlockUnit.meta</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.add_condition"><code class="docutils literal notranslate"><span class="pre">BlockUnit.add_condition()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.generate_conditions"><code class="docutils literal notranslate"><span class="pre">BlockUnit.generate_conditions()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.get_all_data"><code class="docutils literal notranslate"><span class="pre">BlockUnit.get_all_data()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.get_trial_data"><code class="docutils literal notranslate"><span class="pre">BlockUnit.get_trial_data()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.logging_block_info"><code class="docutils literal notranslate"><span class="pre">BlockUnit.logging_block_info()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.on_end"><code class="docutils literal notranslate"><span class="pre">BlockUnit.on_end()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.on_start"><code class="docutils literal notranslate"><span class="pre">BlockUnit.on_start()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.run_trial"><code class="docutils literal notranslate"><span class="pre">BlockUnit.run_trial()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.summarize"><code class="docutils literal notranslate"><span class="pre">BlockUnit.summarize()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.BlockUnit.BlockUnit.to_dict"><code class="docutils literal notranslate"><span class="pre">BlockUnit.to_dict()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-psyflow.StimBank">psyflow.StimBank module</a><ul>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank"><code class="docutils literal notranslate"><span class="pre">StimBank</span></code></a><ul>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.add_from_dict"><code class="docutils literal notranslate"><span class="pre">StimBank.add_from_dict()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.add_voice"><code class="docutils literal notranslate"><span class="pre">StimBank.add_voice()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.convert_to_voice"><code class="docutils literal notranslate"><span class="pre">StimBank.convert_to_voice()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.define"><code class="docutils literal notranslate"><span class="pre">StimBank.define()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.describe"><code class="docutils literal notranslate"><span class="pre">StimBank.describe()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.export_to_yaml"><code class="docutils literal notranslate"><span class="pre">StimBank.export_to_yaml()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.get"><code class="docutils literal notranslate"><span class="pre">StimBank.get()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.get_and_format"><code class="docutils literal notranslate"><span class="pre">StimBank.get_and_format()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.get_group"><code class="docutils literal notranslate"><span class="pre">StimBank.get_group()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.get_selected"><code class="docutils literal notranslate"><span class="pre">StimBank.get_selected()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.has"><code class="docutils literal notranslate"><span class="pre">StimBank.has()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.keys"><code class="docutils literal notranslate"><span class="pre">StimBank.keys()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.make_factory"><code class="docutils literal notranslate"><span class="pre">StimBank.make_factory()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.preload_all"><code class="docutils literal notranslate"><span class="pre">StimBank.preload_all()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.preview_all"><code class="docutils literal notranslate"><span class="pre">StimBank.preview_all()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.preview_group"><code class="docutils literal notranslate"><span class="pre">StimBank.preview_group()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.preview_selected"><code class="docutils literal notranslate"><span class="pre">StimBank.preview_selected()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.rebuild"><code class="docutils literal notranslate"><span class="pre">StimBank.rebuild()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimBank.StimBank.validate_dict"><code class="docutils literal notranslate"><span class="pre">StimBank.validate_dict()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-psyflow.SubInfo">psyflow.SubInfo module</a><ul>
<li><a class="reference internal" href="#psyflow.SubInfo.SubInfo"><code class="docutils literal notranslate"><span class="pre">SubInfo</span></code></a><ul>
<li><a class="reference internal" href="#psyflow.SubInfo.SubInfo.subject_data"><code class="docutils literal notranslate"><span class="pre">SubInfo.subject_data</span></code></a></li>
<li><a class="reference internal" href="#psyflow.SubInfo.SubInfo.collect"><code class="docutils literal notranslate"><span class="pre">SubInfo.collect()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.SubInfo.SubInfo.validate"><code class="docutils literal notranslate"><span class="pre">SubInfo.validate()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-psyflow.TaskSettings">psyflow.TaskSettings module</a><ul>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings"><code class="docutils literal notranslate"><span class="pre">TaskSettings</span></code></a><ul>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.add_subinfo"><code class="docutils literal notranslate"><span class="pre">TaskSettings.add_subinfo()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.bg_color"><code class="docutils literal notranslate"><span class="pre">TaskSettings.bg_color</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.block_seed"><code class="docutils literal notranslate"><span class="pre">TaskSettings.block_seed</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.conditions"><code class="docutils literal notranslate"><span class="pre">TaskSettings.conditions</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.from_dict"><code class="docutils literal notranslate"><span class="pre">TaskSettings.from_dict()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.fullscreen"><code class="docutils literal notranslate"><span class="pre">TaskSettings.fullscreen</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.json_file"><code class="docutils literal notranslate"><span class="pre">TaskSettings.json_file</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.key_list"><code class="docutils literal notranslate"><span class="pre">TaskSettings.key_list</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.log_file"><code class="docutils literal notranslate"><span class="pre">TaskSettings.log_file</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.overall_seed"><code class="docutils literal notranslate"><span class="pre">TaskSettings.overall_seed</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.res_file"><code class="docutils literal notranslate"><span class="pre">TaskSettings.res_file</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.save_path"><code class="docutils literal notranslate"><span class="pre">TaskSettings.save_path</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.save_to_json"><code class="docutils literal notranslate"><span class="pre">TaskSettings.save_to_json()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.screen"><code class="docutils literal notranslate"><span class="pre">TaskSettings.screen</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.seed_mode"><code class="docutils literal notranslate"><span class="pre">TaskSettings.seed_mode</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.set_block_seed"><code class="docutils literal notranslate"><span class="pre">TaskSettings.set_block_seed()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.size"><code class="docutils literal notranslate"><span class="pre">TaskSettings.size</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.task_name"><code class="docutils literal notranslate"><span class="pre">TaskSettings.task_name</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.total_blocks"><code class="docutils literal notranslate"><span class="pre">TaskSettings.total_blocks</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.total_trials"><code class="docutils literal notranslate"><span class="pre">TaskSettings.total_trials</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.trials_per_block"><code class="docutils literal notranslate"><span class="pre">TaskSettings.trials_per_block</span></code></a></li>
<li><a class="reference internal" href="#psyflow.TaskSettings.TaskSettings.units"><code class="docutils literal notranslate"><span class="pre">TaskSettings.units</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-psyflow.StimUnit">psyflow.StimUnit module</a><ul>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit"><code class="docutils literal notranslate"><span class="pre">StimUnit</span></code></a><ul>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.add_stim"><code class="docutils literal notranslate"><span class="pre">StimUnit.add_stim()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.capture_response"><code class="docutils literal notranslate"><span class="pre">StimUnit.capture_response()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.clear_stimuli"><code class="docutils literal notranslate"><span class="pre">StimUnit.clear_stimuli()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.get_state"><code class="docutils literal notranslate"><span class="pre">StimUnit.get_state()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.log_unit"><code class="docutils literal notranslate"><span class="pre">StimUnit.log_unit()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.on_end"><code class="docutils literal notranslate"><span class="pre">StimUnit.on_end()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.on_response"><code class="docutils literal notranslate"><span class="pre">StimUnit.on_response()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.on_start"><code class="docutils literal notranslate"><span class="pre">StimUnit.on_start()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.on_timeout"><code class="docutils literal notranslate"><span class="pre">StimUnit.on_timeout()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.run"><code class="docutils literal notranslate"><span class="pre">StimUnit.run()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.send_trigger"><code class="docutils literal notranslate"><span class="pre">StimUnit.send_trigger()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.set_state"><code class="docutils literal notranslate"><span class="pre">StimUnit.set_state()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.show"><code class="docutils literal notranslate"><span class="pre">StimUnit.show()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.to_dict"><code class="docutils literal notranslate"><span class="pre">StimUnit.to_dict()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.StimUnit.StimUnit.wait_and_continue"><code class="docutils literal notranslate"><span class="pre">StimUnit.wait_and_continue()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-psyflow.TriggerSender">psyflow.TriggerSender module</a><ul>
<li><a class="reference internal" href="#psyflow.TriggerSender.TriggerSender"><code class="docutils literal notranslate"><span class="pre">TriggerSender</span></code></a><ul>
<li><a class="reference internal" href="#psyflow.TriggerSender.TriggerSender.send"><code class="docutils literal notranslate"><span class="pre">TriggerSender.send()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-psyflow.LLM">psyflow.LLM module</a><ul>
<li><a class="reference internal" href="#psyflow.LLM.LLMAPIError"><code class="docutils literal notranslate"><span class="pre">LLMAPIError</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient"><code class="docutils literal notranslate"><span class="pre">LLMClient</span></code></a><ul>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.provider"><code class="docutils literal notranslate"><span class="pre">LLMClient.provider</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.api_key"><code class="docutils literal notranslate"><span class="pre">LLMClient.api_key</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.model"><code class="docutils literal notranslate"><span class="pre">LLMClient.model</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient._sdk_client"><code class="docutils literal notranslate"><span class="pre">LLMClient._sdk_client</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.knowledge_base"><code class="docutils literal notranslate"><span class="pre">LLMClient.knowledge_base</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.add_knowledge"><code class="docutils literal notranslate"><span class="pre">LLMClient.add_knowledge()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.doc2task"><code class="docutils literal notranslate"><span class="pre">LLMClient.doc2task()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.generate"><code class="docutils literal notranslate"><span class="pre">LLMClient.generate()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.list_models"><code class="docutils literal notranslate"><span class="pre">LLMClient.list_models()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.register_provider"><code class="docutils literal notranslate"><span class="pre">LLMClient.register_provider()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.save_knowledge"><code class="docutils literal notranslate"><span class="pre">LLMClient.save_knowledge()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.save_readme"><code class="docutils literal notranslate"><span class="pre">LLMClient.save_readme()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.task2doc"><code class="docutils literal notranslate"><span class="pre">LLMClient.task2doc()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.test"><code class="docutils literal notranslate"><span class="pre">LLMClient.test()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.translate"><code class="docutils literal notranslate"><span class="pre">LLMClient.translate()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.LLM.LLMClient.translate_config"><code class="docutils literal notranslate"><span class="pre">LLMClient.translate_config()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-psyflow.utils">psyflow.utils module</a><ul>
<li><a class="reference internal" href="#psyflow.utils.count_down"><code class="docutils literal notranslate"><span class="pre">count_down()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.utils.initialize_exp"><code class="docutils literal notranslate"><span class="pre">initialize_exp()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.utils.list_serial_ports"><code class="docutils literal notranslate"><span class="pre">list_serial_ports()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.utils.list_supported_voices"><code class="docutils literal notranslate"><span class="pre">list_supported_voices()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.utils.load_config"><code class="docutils literal notranslate"><span class="pre">load_config()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.utils.show_ports"><code class="docutils literal notranslate"><span class="pre">show_ports()</span></code></a></li>
<li><a class="reference internal" href="#psyflow.utils.taps"><code class="docutils literal notranslate"><span class="pre">taps()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-psyflow">Module contents</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=92734c54"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>