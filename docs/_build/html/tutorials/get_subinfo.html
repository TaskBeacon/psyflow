<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="TaskSettings: Configuring Your Experiment" href="task_settings.html" /><link rel="prev" title="Getting Started with psyflow" href="getting_started.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.08.06 -->
        <title>SubInfo: Collecting Participant Information - psyflow 0.1.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/logo_settings.css?v=510bd44c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">psyflow 0.1.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/logo_white-removebg.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/logo_black-removebg.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">psyflow 0.1.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started with psyflow</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">SubInfo: Collecting Participant Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="task_settings.html">TaskSettings: Configuring Your Experiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_blocks.html">BlockUnit: Organizing Trials into Experimental Blocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_stimulus.html">StimBank: Flexible Stimulus Management for PsychoPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="send_trigger.html">TriggerSender: Precise Event Marking for EEG/MEG Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_usage.html">Command-Line Tools: Quick Project Setup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../modules.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release workflow</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/tutorials/get_subinfo.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="subinfo-collecting-participant-information">
<h1>SubInfo: Collecting Participant Information<a class="headerlink" href="#subinfo-collecting-participant-information" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">SubInfo</span></code> class provides a flexible and user-friendly way to collect participant information at the beginning of an experiment. It creates standardized GUI dialogs that can be customized through configuration files, supporting multiple field types and localization for international studies.</p>
<p><code class="docutils literal notranslate"><span class="pre">SubInfo</span></code> solves several common challenges in participant registration:</p>
<ul class="simple">
<li><p><strong>Standardization</strong>: Create consistent participant information forms across experiments</p></li>
<li><p><strong>Validation</strong>: Automatically validate input based on field constraints</p></li>
<li><p><strong>Localization</strong>: Display forms in the participant’s language</p></li>
<li><p><strong>Configuration</strong>: Define forms using YAML or dictionaries for easy modification</p></li>
<li><p><strong>Integration</strong>: Seamlessly connect with other psyflow components</p></li>
</ul>
</section>
<section id="key-features">
<h2>Key Features<a class="headerlink" href="#key-features" title="Link to this heading">¶</a></h2>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Multiple field types</p></td>
<td><p>Support for string, integer, and choice (dropdown) fields</p></td>
</tr>
<tr class="row-odd"><td><p>Input validation</p></td>
<td><p>Enforce constraints like min/max values and digit length</p></td>
</tr>
<tr class="row-even"><td><p>Localization</p></td>
<td><p>Display field labels and messages in any language</p></td>
</tr>
<tr class="row-odd"><td><p>YAML configuration</p></td>
<td><p>Define forms using human-readable configuration files</p></td>
</tr>
<tr class="row-even"><td><p>Automatic defaults</p></td>
<td><p>Add standard fields like subject_id if not specified</p></td>
</tr>
<tr class="row-odd"><td><p>Error handling</p></td>
<td><p>Clear error messages for invalid input</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="quick-reference">
<h2>Quick Reference<a class="headerlink" href="#quick-reference" title="Link to this heading">¶</a></h2>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Method</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Initialize</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SubInfo(config)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">subinfo</span> <span class="pre">=</span> <span class="pre">SubInfo(config)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Collect info</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">.collect()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">subinfo.collect()</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Access data</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">.subject_data</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">subject_id</span> <span class="pre">=</span> <span class="pre">subinfo.subject_data['subject_id']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Validate input</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">.validate()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">is_valid</span> <span class="pre">=</span> <span class="pre">subinfo.validate()</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="detailed-usage-guide">
<h2>Detailed Usage Guide<a class="headerlink" href="#detailed-usage-guide" title="Link to this heading">¶</a></h2>
<section id="configuring-the-form">
<h3>1. Configuring the Form<a class="headerlink" href="#configuring-the-form" title="Link to this heading">¶</a></h3>
<section id="option-a-using-a-yaml-configuration">
<h4>Option A: Using a YAML Configuration<a class="headerlink" href="#option-a-using-a-yaml-configuration" title="Link to this heading">¶</a></h4>
<p>YAML provides a clean, readable way to define your form structure:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># subinfo_config.yaml</span>
<span class="nt">subinfo_fields</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subject_id</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span>
<span class="w">    </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">      </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">101</span>
<span class="w">      </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">999</span>
<span class="w">      </span><span class="nt">digits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">age</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span>
<span class="w">    </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">      </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">18</span>
<span class="w">      </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gender</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">choice</span>
<span class="w">    </span><span class="nt">choices</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Male</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Female</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Non-binary</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Prefer not to say</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">handedness</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">choice</span>
<span class="w">    </span><span class="nt">choices</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Right</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Left</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Ambidextrous</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vision</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">choice</span>
<span class="w">    </span><span class="nt">choices</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Normal</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Corrected-to-normal</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Impaired</span><span class="p p-Indicator">]</span>

<span class="c1"># Optional localization mapping</span>
<span class="nt">subinfo_mapping</span><span class="p">:</span>
<span class="w">  </span><span class="nt">subject_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Participant</span><span class="nv"> </span><span class="s">ID&quot;</span>
<span class="w">  </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Age&quot;</span>
<span class="w">  </span><span class="nt">gender</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Gender&quot;</span>
<span class="w">  </span><span class="nt">handedness</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Handedness&quot;</span>
<span class="w">  </span><span class="nt">vision</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Vision&quot;</span>
<span class="w">  </span><span class="nt">Male</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Male&quot;</span>
<span class="w">  </span><span class="nt">Female</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Female&quot;</span>
<span class="w">  </span><span class="nt">Non-binary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Non-binary&quot;</span>
<span class="w">  </span><span class="nt">Prefer not to say</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Prefer</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">say&quot;</span>
<span class="w">  </span><span class="nt">Right</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Right&quot;</span>
<span class="w">  </span><span class="nt">Left</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Left&quot;</span>
<span class="w">  </span><span class="nt">Ambidextrous</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ambidextrous&quot;</span>
<span class="w">  </span><span class="nt">Normal</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Normal&quot;</span>
<span class="w">  </span><span class="nt">Corrected-to-normal</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Corrected-to-normal&quot;</span>
<span class="w">  </span><span class="nt">Impaired</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Impaired&quot;</span>
<span class="w">  </span><span class="nt">registration_successful</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Registration</span><span class="nv"> </span><span class="s">successful!&quot;</span>
<span class="w">  </span><span class="nt">registration_failed</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Registration</span><span class="nv"> </span><span class="s">cancelled.&quot;</span>
<span class="w">  </span><span class="nt">invalid_input</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Invalid</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">{field}&quot;</span>
</pre></div>
</div>
</section>
<section id="option-b-using-a-python-dictionary">
<h4>Option B: Using a Python Dictionary<a class="headerlink" href="#option-b-using-a-python-dictionary" title="Link to this heading">¶</a></h4>
<p>You can also define the form directly in Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;subinfo_fields&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;subject_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
            <span class="s2">&quot;constraints&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">101</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mi">999</span><span class="p">,</span> <span class="s2">&quot;digits&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;age&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
            <span class="s2">&quot;constraints&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;gender&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choice&quot;</span><span class="p">,</span>
            <span class="s2">&quot;choices&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Male&quot;</span><span class="p">,</span> <span class="s2">&quot;Female&quot;</span><span class="p">,</span> <span class="s2">&quot;Non-binary&quot;</span><span class="p">,</span> <span class="s2">&quot;Prefer not to say&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;handedness&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choice&quot;</span><span class="p">,</span>
            <span class="s2">&quot;choices&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Right&quot;</span><span class="p">,</span> <span class="s2">&quot;Left&quot;</span><span class="p">,</span> <span class="s2">&quot;Ambidextrous&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;subinfo_mapping&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;subject_id&quot;</span><span class="p">:</span> <span class="s2">&quot;Participant ID&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="s2">&quot;Age&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gender&quot;</span><span class="p">:</span> <span class="s2">&quot;Gender&quot;</span><span class="p">,</span>
        <span class="s2">&quot;handedness&quot;</span><span class="p">:</span> <span class="s2">&quot;Handedness&quot;</span>
        <span class="c1"># Add more mappings as needed</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="field-types-and-constraints">
<h3>2. Field Types and Constraints<a class="headerlink" href="#field-types-and-constraints" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">SubInfo</span></code> supports three field types:</p>
<section id="string-fields">
<h4>String Fields<a class="headerlink" href="#string-fields" title="Link to this heading">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subject_name</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</pre></div>
</div>
<p>String fields accept any text input without validation.</p>
</section>
<section id="integer-fields">
<h4>Integer Fields<a class="headerlink" href="#integer-fields" title="Link to this heading">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subject_id</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span>
<span class="w">  </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">101</span><span class="w">      </span><span class="c1"># Minimum allowed value</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">999</span><span class="w">      </span><span class="c1"># Maximum allowed value</span>
<span class="w">    </span><span class="nt">digits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w">     </span><span class="c1"># Required number of digits</span>
</pre></div>
</div>
<p>Integer fields validate that:</p>
<ul class="simple">
<li><p>The input can be converted to an integer</p></li>
<li><p>The value is within the min/max range (if specified)</p></li>
<li><p>The number has exactly the specified number of digits (if specified)</p></li>
</ul>
</section>
<section id="choice-fields-dropdowns">
<h4>Choice Fields (Dropdowns)<a class="headerlink" href="#choice-fields-dropdowns" title="Link to this heading">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">condition</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">choice</span>
<span class="w">  </span><span class="nt">choices</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Control</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Experimental</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Choice fields present a dropdown menu with the specified options.</p>
</section>
</section>
<section id="collecting-participant-information">
<h3>3. Collecting Participant Information<a class="headerlink" href="#collecting-participant-information" title="Link to this heading">¶</a></h3>
<p>Once you’ve defined your configuration, collecting information is straightforward:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psyflow</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubInfo</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">yaml</span>

<span class="c1"># Load configuration from YAML</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;subinfo_config.yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># Create SubInfo instance</span>
<span class="n">subinfo</span> <span class="o">=</span> <span class="n">SubInfo</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="c1"># Show dialog and collect information</span>
<span class="n">subject_data</span> <span class="o">=</span> <span class="n">subinfo</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="c1"># Check if user cancelled</span>
<span class="k">if</span> <span class="n">subject_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;User cancelled the form&quot;</span><span class="p">)</span>
    <span class="c1"># Handle cancellation (e.g., exit experiment)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Collected information:&quot;</span><span class="p">,</span> <span class="n">subject_data</span><span class="p">)</span>
    <span class="c1"># Continue with experiment using the collected data</span>
</pre></div>
</div>
</section>
<section id="localization">
<h3>4. Localization<a class="headerlink" href="#localization" title="Link to this heading">¶</a></h3>
<p>For international studies, you can localize the form by providing translations in the <code class="docutils literal notranslate"><span class="pre">subinfo_mapping</span></code> section:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example for Chinese localization</span>
<span class="nt">subinfo_mapping</span><span class="p">:</span>
<span class="w">  </span><span class="nt">subject_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;参与者编号&quot;</span>
<span class="w">  </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;年龄&quot;</span>
<span class="w">  </span><span class="nt">gender</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;性别&quot;</span>
<span class="w">  </span><span class="nt">Male</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;男&quot;</span>
<span class="w">  </span><span class="nt">Female</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;女&quot;</span>
<span class="w">  </span><span class="nt">Non-binary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;非二元性别&quot;</span>
<span class="w">  </span><span class="nt">Prefer not to say</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;不愿透露&quot;</span>
<span class="w">  </span><span class="nt">registration_successful</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;注册成功！&quot;</span>
<span class="w">  </span><span class="nt">registration_failed</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;注册取消。&quot;</span>
<span class="w">  </span><span class="nt">invalid_input</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;无效的输入：{field}&quot;</span>
</pre></div>
</div>
<p>The form will display these translated labels while still using the English keys internally for consistency.</p>
</section>
<section id="integration-with-tasksettings">
<h3>5. Integration with TaskSettings<a class="headerlink" href="#integration-with-tasksettings" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">SubInfo</span></code> works seamlessly with <code class="docutils literal notranslate"><span class="pre">TaskSettings</span></code> for complete experiment configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psyflow</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubInfo</span><span class="p">,</span> <span class="n">TaskSettings</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">yaml</span>

<span class="c1"># Load configuration</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># Create SubInfo and collect participant data</span>
<span class="n">subinfo_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;subinfo_fields&quot;</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;subinfo_fields&quot;</span><span class="p">,</span> <span class="p">[]),</span>
    <span class="s2">&quot;subinfo_mapping&quot;</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;subinfo_mapping&quot;</span><span class="p">,</span> <span class="p">{})</span>
<span class="p">}</span>
<span class="n">subinfo</span> <span class="o">=</span> <span class="n">SubInfo</span><span class="p">(</span><span class="n">subinfo_config</span><span class="p">)</span>
<span class="n">subject_data</span> <span class="o">=</span> <span class="n">subinfo</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="k">if</span> <span class="n">subject_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Experiment cancelled&quot;</span><span class="p">)</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Create TaskSettings with the collected subject info</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">TaskSettings</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;task&quot;</span><span class="p">,</span> <span class="p">{}))</span>
<span class="n">settings</span><span class="o">.</span><span class="n">add_subinfo</span><span class="p">(</span><span class="n">subject_data</span><span class="p">)</span>

<span class="c1"># Now you have subject-specific paths and seeds</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data will be saved to: </span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">res_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using block seed: </span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">block_seed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="complete-example">
<h2>Complete Example<a class="headerlink" href="#complete-example" title="Link to this heading">¶</a></h2>
<p>Here’s a complete example showing how to use <code class="docutils literal notranslate"><span class="pre">SubInfo</span></code> in an experiment:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psychopy</span><span class="w"> </span><span class="kn">import</span> <span class="n">visual</span><span class="p">,</span> <span class="n">core</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">psyflow</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubInfo</span><span class="p">,</span> <span class="n">TaskSettings</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">yaml</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="c1"># Load configuration</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># Step 1: Collect participant information</span>
<span class="n">subinfo_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;subinfo_fields&quot;</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;subinfo_fields&quot;</span><span class="p">,</span> <span class="p">[]),</span>
    <span class="s2">&quot;subinfo_mapping&quot;</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;subinfo_mapping&quot;</span><span class="p">,</span> <span class="p">{})</span>
<span class="p">}</span>
<span class="n">subinfo</span> <span class="o">=</span> <span class="n">SubInfo</span><span class="p">(</span><span class="n">subinfo_config</span><span class="p">)</span>
<span class="n">subject_data</span> <span class="o">=</span> <span class="n">subinfo</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="k">if</span> <span class="n">subject_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Experiment cancelled&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Step 2: Configure task settings</span>
<span class="n">task_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">**</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;window&quot;</span><span class="p">,</span> <span class="p">{}),</span>
    <span class="o">**</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;task&quot;</span><span class="p">,</span> <span class="p">{}),</span>
    <span class="o">**</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timing&quot;</span><span class="p">,</span> <span class="p">{})</span>
<span class="p">}</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">TaskSettings</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">task_config</span><span class="p">)</span>
<span class="n">settings</span><span class="o">.</span><span class="n">add_subinfo</span><span class="p">(</span><span class="n">subject_data</span><span class="p">)</span>

<span class="c1"># Step 3: Create PsychoPy window</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span>
    <span class="n">size</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">window_size</span><span class="p">,</span>
    <span class="n">fullscr</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">fullscreen</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">bg_color</span><span class="p">,</span>
    <span class="n">units</span><span class="o">=</span><span class="s2">&quot;deg&quot;</span>
<span class="p">)</span>

<span class="c1"># Step 4: Show welcome message with participant info</span>
<span class="n">welcome_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Welcome, Participant </span><span class="si">{</span><span class="n">subject_data</span><span class="p">[</span><span class="s1">&#39;subject_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">!</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<span class="n">welcome_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Age: </span><span class="si">{</span><span class="n">subject_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">welcome_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Gender: </span><span class="si">{</span><span class="n">subject_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<span class="n">welcome_text</span> <span class="o">+=</span> <span class="s2">&quot;Press any key to begin the experiment.&quot;</span>

<span class="n">welcome</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">welcome_text</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">welcome</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="c1"># Wait for keypress</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">psychopy.event</span><span class="w"> </span><span class="kn">import</span> <span class="n">waitKeys</span>
<span class="n">waitKeys</span><span class="p">()</span>

<span class="c1"># Continue with experiment...</span>
<span class="n">win</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="advanced-usage">
<h2>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Link to this heading">¶</a></h2>
<section id="custom-validation">
<h3>Custom Validation<a class="headerlink" href="#custom-validation" title="Link to this heading">¶</a></h3>
<p>You can extend <code class="docutils literal notranslate"><span class="pre">SubInfo</span></code> with custom validation logic:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CustomSubInfo</span><span class="p">(</span><span class="n">SubInfo</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># First run the standard validation</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">validate</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>
            
        <span class="c1"># Add custom validation logic</span>
        <span class="k">if</span> <span class="s1">&#39;subject_id&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_data</span> <span class="ow">and</span> <span class="s1">&#39;group&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_data</span><span class="p">:</span>
            <span class="n">subject_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subject_data</span><span class="p">[</span><span class="s1">&#39;subject_id&#39;</span><span class="p">])</span>
            <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_data</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span>
            
            <span class="c1"># Check if subject_id is valid for the selected group</span>
            <span class="k">if</span> <span class="n">group</span> <span class="o">==</span> <span class="s1">&#39;Control&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">100</span> <span class="o">&lt;=</span> <span class="n">subject_id</span> <span class="o">&lt;</span> <span class="mi">200</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_show_error</span><span class="p">(</span><span class="s2">&quot;Control group IDs must be between 100-199&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">group</span> <span class="o">==</span> <span class="s1">&#39;Experimental&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">subject_id</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_show_error</span><span class="p">(</span><span class="s2">&quot;Experimental group IDs must be between 200-299&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
                
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="programmatic-form-creation">
<h3>Programmatic Form Creation<a class="headerlink" href="#programmatic-form-creation" title="Link to this heading">¶</a></h3>
<p>You can also create forms programmatically:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_dynamic_form</span><span class="p">(</span><span class="n">experiment_type</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a form based on experiment type.&quot;&quot;&quot;</span>
    <span class="n">base_fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;subject_id&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="s2">&quot;constraints&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mi">999</span><span class="p">}}</span>
    <span class="p">]</span>
    
    <span class="k">if</span> <span class="n">experiment_type</span> <span class="o">==</span> <span class="s2">&quot;behavioral&quot;</span><span class="p">:</span>
        <span class="n">base_fields</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;gender&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choice&quot;</span><span class="p">,</span> <span class="s2">&quot;choices&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Male&quot;</span><span class="p">,</span> <span class="s2">&quot;Female&quot;</span><span class="p">,</span> <span class="s2">&quot;Other&quot;</span><span class="p">]}</span>
        <span class="p">])</span>
    <span class="k">elif</span> <span class="n">experiment_type</span> <span class="o">==</span> <span class="s2">&quot;eeg&quot;</span><span class="p">:</span>
        <span class="n">base_fields</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;cap_size&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choice&quot;</span><span class="p">,</span> <span class="s2">&quot;choices&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Small&quot;</span><span class="p">,</span> <span class="s2">&quot;Medium&quot;</span><span class="p">,</span> <span class="s2">&quot;Large&quot;</span><span class="p">]},</span>
            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;impedance_check&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choice&quot;</span><span class="p">,</span> <span class="s2">&quot;choices&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Pass&quot;</span><span class="p">,</span> <span class="s2">&quot;Fail&quot;</span><span class="p">]}</span>
        <span class="p">])</span>
    
    <span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;subinfo_fields&quot;</span><span class="p">:</span> <span class="n">base_fields</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">SubInfo</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="c1"># Usage</span>
<span class="n">form</span> <span class="o">=</span> <span class="n">create_dynamic_form</span><span class="p">(</span><span class="s2">&quot;eeg&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p><strong>Keep forms concise</strong>: Only collect information that’s necessary for your experiment.</p></li>
<li><p><strong>Use meaningful field names</strong>: Choose descriptive names that match your data analysis variables.</p></li>
<li><p><strong>Set appropriate constraints</strong>: Use min/max and digit constraints to prevent data entry errors.</p></li>
<li><p><strong>Provide clear labels</strong>: Use the mapping dictionary to make field labels clear and understandable.</p></li>
<li><p><strong>Handle cancellation gracefully</strong>: Always check if <code class="docutils literal notranslate"><span class="pre">collect()</span></code> returns <code class="docutils literal notranslate"><span class="pre">None</span></code> and handle it appropriately.</p></li>
<li><p><strong>Store configurations externally</strong>: Keep form definitions in YAML files for easy modification without changing code.</p></li>
<li><p><strong>Test with different languages</strong>: If using localization, test the form with all supported languages.</p></li>
</ol>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Form doesn’t appear</strong>: Ensure PsychoPy is properly installed and can create GUI elements.</p></li>
<li><p><strong>Validation errors</strong>: Check that your constraints are reasonable and that field types match expected input.</p></li>
<li><p><strong>Missing fields</strong>: Verify that your configuration dictionary has the correct structure.</p></li>
<li><p><strong>Localization issues</strong>: Ensure all keys in <code class="docutils literal notranslate"><span class="pre">subinfo_mapping</span></code> match field names and choice options exactly.</p></li>
</ul>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">¶</a></h2>
<p>Now that you understand how to use <code class="docutils literal notranslate"><span class="pre">SubInfo</span></code>, you can:</p>
<ul class="simple">
<li><p>Learn about <a class="reference internal" href="task_settings.html"><span class="std std-doc">TaskSettings</span></a> for configuring your experiment</p></li>
<li><p>Explore <a class="reference internal" href="build_stimulus.html"><span class="std std-doc">StimBank</span></a> for managing stimuli</p></li>
<li><p>Check out <a class="reference internal" href="build_blocks.html"><span class="std std-doc">BlockUnit</span></a> for organizing trials into blocks</p></li>
<li><p>See <a class="reference internal" href="build_trialunit.html"><span class="std std-doc">StimUnit</span></a> for creating individual trials</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="task_settings.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">TaskSettings: Configuring Your Experiment</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="getting_started.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Getting Started with psyflow</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Zhipeng Cao
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">SubInfo: Collecting Participant Information</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#key-features">Key Features</a></li>
<li><a class="reference internal" href="#quick-reference">Quick Reference</a></li>
<li><a class="reference internal" href="#detailed-usage-guide">Detailed Usage Guide</a><ul>
<li><a class="reference internal" href="#configuring-the-form">1. Configuring the Form</a><ul>
<li><a class="reference internal" href="#option-a-using-a-yaml-configuration">Option A: Using a YAML Configuration</a></li>
<li><a class="reference internal" href="#option-b-using-a-python-dictionary">Option B: Using a Python Dictionary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#field-types-and-constraints">2. Field Types and Constraints</a><ul>
<li><a class="reference internal" href="#string-fields">String Fields</a></li>
<li><a class="reference internal" href="#integer-fields">Integer Fields</a></li>
<li><a class="reference internal" href="#choice-fields-dropdowns">Choice Fields (Dropdowns)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#collecting-participant-information">3. Collecting Participant Information</a></li>
<li><a class="reference internal" href="#localization">4. Localization</a></li>
<li><a class="reference internal" href="#integration-with-tasksettings">5. Integration with TaskSettings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#complete-example">Complete Example</a></li>
<li><a class="reference internal" href="#advanced-usage">Advanced Usage</a><ul>
<li><a class="reference internal" href="#custom-validation">Custom Validation</a></li>
<li><a class="reference internal" href="#programmatic-form-creation">Programmatic Form Creation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#best-practices">Best Practices</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=a58bc63e"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>